<!doctype html>
<html lang="zh" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-concepts/built_in_attributes_and_fat_obj" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.4.0">
<title data-rh="true">内置属性和 FatObj | Ribir</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://ribir.org/zh/docs/next/concepts/built_in_attributes_and_fat_obj"><meta data-rh="true" property="og:locale" content="zh"><meta data-rh="true" property="og:locale:alternate" content="en"><meta data-rh="true" name="docusaurus_locale" content="zh"><meta data-rh="true" name="docsearch:language" content="zh"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="内置属性和 FatObj | Ribir"><meta data-rh="true" name="description" content="Ribir 提供了一个强大的内置属性系统，让您可以为任何 Widget 添加常用功能，如布局控制（margin、alignment）、视觉效果（background、border、opacity、transform）和交互事件（ontap、onhover）。这些功能并非由每个 Widget 单独实现，而是通过一个称为 FatObj 的通用包装器统一提供。"><meta data-rh="true" property="og:description" content="Ribir 提供了一个强大的内置属性系统，让您可以为任何 Widget 添加常用功能，如布局控制（margin、alignment）、视觉效果（background、border、opacity、transform）和交互事件（ontap、onhover）。这些功能并非由每个 Widget 单独实现，而是通过一个称为 FatObj 的通用包装器统一提供。"><link data-rh="true" rel="icon" href="/zh/img/logo.ico"><link data-rh="true" rel="canonical" href="https://ribir.org/zh/docs/next/concepts/built_in_attributes_and_fat_obj"><link data-rh="true" rel="alternate" href="https://ribir.org/docs/next/concepts/built_in_attributes_and_fat_obj" hreflang="en"><link data-rh="true" rel="alternate" href="https://ribir.org/zh/docs/next/concepts/built_in_attributes_and_fat_obj" hreflang="zh"><link data-rh="true" rel="alternate" href="https://ribir.org/docs/next/concepts/built_in_attributes_and_fat_obj" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/zh/blog/rss.xml" title="Ribir RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/zh/blog/atom.xml" title="Ribir Atom Feed">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Z8VRXCGSJQ"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-Z8VRXCGSJQ",{anonymize_ip:!0})</script>




<script src="/js/style.js" defer="defer"></script><link rel="stylesheet" href="/zh/assets/css/styles.df2ccd8c.css">
<script src="/zh/assets/js/runtime~main.93704299.js" defer="defer"></script>
<script src="/zh/assets/js/main.c3b19df9.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="跳到主要内容"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/zh/"><div class="navbar__logo"><img src="/zh/img/logo.svg" alt="Ribir LOGO" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/zh/img/logo.svg" alt="Ribir LOGO" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Ribir</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/zh/docs/next/introduction">教程</a><a class="navbar__item navbar__link" href="/zh/blog">博客</a><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/zh/docs/next/introduction">Next</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/zh/docs/next/concepts/built_in_attributes_and_fat_obj">Next</a></li><li><a class="dropdown__link" href="/zh/docs/introduction">0.2.x</a></li><li><a class="dropdown__link" href="/zh/docs/0.1.x/introduction">0.1.x</a></li></ul></div></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link" href="/zh/docs/next/concepts/built_in_attributes_and_fat_obj"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>中文</a><ul class="dropdown__menu"><li><a href="/docs/next/concepts/built_in_attributes_and_fat_obj" target="_self" rel="noopener noreferrer" class="dropdown__link" lang="en">English</a></li><li><a href="/zh/docs/next/concepts/built_in_attributes_and_fat_obj" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang="zh">中文</a></li></ul></div><a href="https://github.com/RibirX/Ribir" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="文档侧边栏" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/zh/docs/next/introduction">简介</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/zh/docs/next/category/getting-started">快速上手</a><button aria-label="展开侧边栏分类 &#x27;快速上手&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/zh/docs/next/category/tutorial">Tutorial</a><button aria-label="展开侧边栏分类 &#x27;Tutorial&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/zh/docs/next/category/core-concepts">Core Concepts</a><button aria-label="折叠侧边栏分类 &#x27;Core Concepts&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/next/concepts/declarative_ui">声明式 UI</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/next/concepts/widgets_composition">Widget 系统</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/zh/docs/next/concepts/built_in_attributes_and_fat_obj">内置属性和 FatObj</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/next/concepts/state_management">状态管理</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/next/concepts/data_sharing_and_events">数据共享与事件</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh/docs/next/concepts/layout">布局系统</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/zh/docs/next/category/widget-system">Widget System</a><button aria-label="展开侧边栏分类 &#x27;Widget System&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/zh/docs/next/category/advanced-topics">Advanced Topics</a><button aria-label="展开侧边栏分类 &#x27;Advanced Topics&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>此为 <!-- -->Ribir<!-- --> <b>Next</b> 版尚未发行的文档。</div><div class="margin-top--md">最新的文档请参阅 <b><a href="/zh/docs/introduction">最新版本</a></b> (<!-- -->0.2.x<!-- -->)。</div></div><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="页面路径"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/zh/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/zh/docs/next/category/core-concepts"><span itemprop="name">Core Concepts</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">内置属性和 FatObj</span><meta itemprop="position" content="2"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">版本：Next</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">本页总览</button></div><div class="theme-doc-markdown markdown"><h1>内置属性和 FatObj</h1>
<p>Ribir 提供了一个强大的内置属性系统，让您可以为任何 Widget 添加常用功能，如布局控制（margin、alignment）、视觉效果（background、border、opacity、transform）和交互事件（on_tap、on_hover）。这些功能并非由每个 Widget 单独实现，而是通过一个称为 <code>FatObj</code> 的通用包装器统一提供。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-实例化过程"><code>@</code> 实例化过程<a class="hash-link" aria-label="-实例化过程的直接链接" title="-实例化过程的直接链接" href="/zh/docs/next/concepts/built_in_attributes_and_fat_obj#-实例化过程">​</a></h2>
<p>当您在 <code>fn_widget!</code> 中使用 <code>@</code> 语法通过类型来声明（例如 <code>@Text { ... }</code>）时，Ribir 会执行以下步骤来构建 Widget：</p>
<ol>
<li><strong>获取 Builder</strong>: 调用 <code>Declare</code> trait 的 <code>declarer()</code> 方法来获取该 Widget 的 Builder。</li>
<li><strong>初始化字段</strong>: 对于 <code>{ ... }</code> 块中指定的每个字段，调用 Builder 上相应的 <code>with_xxx()</code> 方法（例如 <code>with_text(...)</code>）。</li>
<li><strong>完成构建</strong>: 最后，调用 Builder 的 <code>finish()</code> 方法（Builder 实现了 <code>ObjDeclarer</code> trait）来完成构建并返回已声明的 Widget。</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="declare-选项"><code>#[declare]</code> 选项<a class="hash-link" aria-label="declare-选项的直接链接" title="declare-选项的直接链接" href="/zh/docs/next/concepts/built_in_attributes_and_fat_obj#declare-选项">​</a></h3>
<p><code>#[declare]</code> 宏支持多项选项来自定义其行为：</p>
<ul>
<li><strong>默认</strong>: 生成一个完整的 Builder，返回 <code>FatObj&lt;Stateful&lt;T&gt;&gt;</code>，启用所有内置属性和响应式状态。</li>
<li><strong><code>#[declare(stateless)]</code></strong>: 生成一个完整的 Builder，返回 <code>FatObj&lt;T&gt;</code>。支持内置属性，但 Widget 本身不是有状态的。</li>
<li><strong><code>#[declare(simple)]</code></strong>: 生成一个简化的 Builder，返回 <code>Stateful&lt;T&gt;</code>（如果 struct 没有字段则返回 <code>T</code>）。这适用于不需要内置属性的 Widget。</li>
<li><strong><code>#[declare(simple, stateless)]</code></strong>: 与 <code>simple</code> 类似，但始终返回原始对象 <code>T</code>。</li>
<li><strong><code>#[declare(eager)]</code></strong>: 生成一个 eager 模式的 Builder，它会立即构建 Widget（即在设置字段时立即修改 Widget 实例）。这允许部分初始化复杂字段（例如，可以分别设置 <code>Size</code> 字段的 <code>width</code> 和 <code>height</code>）。它可以与 <code>simple</code> 和 <code>stateless</code> 结合使用。</li>
<li><strong><code>#[declare(validate)]</code></strong>: 为 Widget 启用 <code>declare_validate</code> 验证方法。</li>
</ul>
<blockquote>
<p>[!NOTE]
<code>#[simple_declare]</code> 现在已被废弃，推荐使用 <code>#[declare(simple)]</code>。</p>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="eager-模式复杂字段的部分初始化">Eager 模式：复杂字段的部分初始化<a class="hash-link" aria-label="Eager 模式：复杂字段的部分初始化的直接链接" title="Eager 模式：复杂字段的部分初始化的直接链接" href="/zh/docs/next/concepts/built_in_attributes_and_fat_obj#eager-模式复杂字段的部分初始化">​</a></h3>
<p><code>#[declare(eager)]</code> 支持<strong>复杂字段的部分初始化</strong>。在延迟模式下，Widget 直到 <code>finish()</code> 时才构建。而在 eager 模式下，Widget 会立即以默认值创建，允许自定义设置方法修改复杂字段的各个部分。</p>
<p><strong>示例：为 <code>Size</code> 字段支持 <code>width</code> 和 <code>height</code></strong></p>
<div class="language-rust codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rust codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">use</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">ribir</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">::</span><span class="token namespace" style="opacity:0.7">prelude</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">::</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token attribute attr-name" style="color:#00a4db">#[derive(Default)]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token attribute attr-name" style="color:#00a4db">#[declare(eager)]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token type-definition class-name">SizedBox</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token attribute attr-name" style="color:#00a4db">#[declare(default)]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    size</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name">Size</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">impl</span><span class="token plain"> </span><span class="token class-name">Render</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token class-name">SizedBox</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">fn</span><span class="token plain"> </span><span class="token function-definition function" style="color:#d73a49">measure</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token keyword" style="color:#00009f">self</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> clamp</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name">BoxClamp</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> _</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token keyword" style="color:#00009f">mut</span><span class="token plain"> </span><span class="token class-name">MeasureCtx</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">-&gt;</span><span class="token plain"> </span><span class="token class-name">Size</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> clamp</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">clamp</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">size</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">fn</span><span class="token plain"> </span><span class="token function-definition function" style="color:#d73a49">paint</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token keyword" style="color:#00009f">self</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> _</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token keyword" style="color:#00009f">mut</span><span class="token plain"> </span><span class="token class-name">PaintingCtx</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">impl</span><span class="token plain"> </span><span class="token class-name">SizedBoxDeclarer</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/// 设置宽度，支持普通值和 pipe</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">fn</span><span class="token plain"> </span><span class="token function-definition function" style="color:#d73a49">with_width</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token class-name">K</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">?</span><span class="token class-name">Sized</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token keyword" style="color:#00009f">mut</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">self</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> width</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">impl</span><span class="token plain"> </span><span class="token class-name">RInto</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token class-name">PipeValue</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token keyword" style="color:#00009f">f32</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">K</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">-&gt;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token keyword" style="color:#00009f">mut</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">Self</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> host </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">host</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">clone_writer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> mix </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">mix_builtin_widget</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        mix</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">init_sub_widget</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">width</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">host</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token closure-params closure-punctuation punctuation" style="color:#393A34">|</span><span class="token closure-params">w</span><span class="token closure-params punctuation" style="color:#393A34">:</span><span class="token closure-params"> </span><span class="token closure-params operator" style="color:#393A34">&amp;</span><span class="token closure-params keyword" style="color:#00009f">mut</span><span class="token closure-params"> </span><span class="token closure-params class-name">SizedBox</span><span class="token closure-params punctuation" style="color:#393A34">,</span><span class="token closure-params"> v</span><span class="token closure-params closure-punctuation punctuation" style="color:#393A34">|</span><span class="token plain"> w</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">size</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">width </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> v</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">self</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/// 设置高度，支持普通值和 pipe</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">fn</span><span class="token plain"> </span><span class="token function-definition function" style="color:#d73a49">with_height</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token class-name">K</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">?</span><span class="token class-name">Sized</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token keyword" style="color:#00009f">mut</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">self</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> height</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">impl</span><span class="token plain"> </span><span class="token class-name">RInto</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token class-name">PipeValue</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token keyword" style="color:#00009f">f32</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">K</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">-&gt;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token keyword" style="color:#00009f">mut</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">Self</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> host </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">host</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">clone_writer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> mix </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">self</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">mix_builtin_widget</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        mix</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">init_sub_widget</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">height</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">host</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token closure-params closure-punctuation punctuation" style="color:#393A34">|</span><span class="token closure-params">w</span><span class="token closure-params punctuation" style="color:#393A34">:</span><span class="token closure-params"> </span><span class="token closure-params operator" style="color:#393A34">&amp;</span><span class="token closure-params keyword" style="color:#00009f">mut</span><span class="token closure-params"> </span><span class="token closure-params class-name">SizedBox</span><span class="token closure-params punctuation" style="color:#393A34">,</span><span class="token closure-params"> v</span><span class="token closure-params closure-punctuation punctuation" style="color:#393A34">|</span><span class="token plain"> w</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">size</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">height </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> v</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">self</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 使用：</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">fn</span><span class="token plain"> </span><span class="token function-definition function" style="color:#d73a49">example</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">-&gt;</span><span class="token plain"> </span><span class="token class-name">Widget</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token lifetime-annotation symbol" style="color:#36acaa">&#x27;static</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> w </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">Stateful</span><span class="token punctuation" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">new</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">100.0f32</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token macro property" style="color:#36acaa">fn_widget!</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token operator" style="color:#393A34">@</span><span class="token class-name">SizedBox</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            width</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token macro property" style="color:#36acaa">pipe!</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">*</span><span class="token variable" style="color:#36acaa">$read</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">w</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// 或：width: 100.0</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            height</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">50.0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">into_widget</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p> 关键点：</p>
<ul>
<li><code>host()</code> 在声明期间提供对有状态 Widget 的访问</li>
<li><code>RInto&lt;PipeValue&lt;T&gt;, K&gt;</code> 同时接受普通值和响应式 pipe</li>
<li><code>init_sub_widget</code> 自动处理 pipe 订阅和清理</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="什么是-fatobj">什么是 FatObj？<a class="hash-link" aria-label="什么是 FatObj？的直接链接" title="什么是 FatObj？的直接链接" href="/zh/docs/next/concepts/built_in_attributes_and_fat_obj#什么是-fatobj">​</a></h2>
<p><code>FatObj&lt;T&gt;</code> 是 Ribir 核心库中的一个泛型结构体，其作用是在构建阶段临时包装一个 Widget，并为其附加各种内置属性，例如 <code>margin</code>、<code>background</code>、<code>on_tap</code> 等。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="工作原理">工作原理<a class="hash-link" aria-label="工作原理的直接链接" title="工作原理的直接链接" href="/zh/docs/next/concepts/built_in_attributes_and_fat_obj#工作原理">​</a></h3>
<ol>
<li><strong>惰性初始化</strong>: <code>FatObj</code> 在内部维护所有内置属性（如 <code>margin</code>、<code>padding</code> 等）的状态，但它们默认为空。只有在您显式使用某个属性时，相关的 Widget 才会被初始化。这确保了未使用的功能不会产生额外的性能开销。</li>
<li><strong>组合</strong>: 在 Widget 构建的最后阶段，<code>FatObj</code> 会将它包装的 Widget 与已启用的内置功能（如 <code>Padding</code>、<code>Container</code>、<code>MixBuiltin</code> 等）组合成最终的 Widget 树。</li>
</ol>
<p>例如：<code>Margin(MixBuiltin(Text))</code></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="常见内置属性">常见内置属性<a class="hash-link" aria-label="常见内置属性的直接链接" title="常见内置属性的直接链接" href="/zh/docs/next/concepts/built_in_attributes_and_fat_obj#常见内置属性">​</a></h2>
<p>内置属性主要分为两类：<strong>属性</strong>和<strong>事件</strong>。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-属性">1. 属性<a class="hash-link" aria-label="1. 属性的直接链接" title="1. 属性的直接链接" href="/zh/docs/next/concepts/built_in_attributes_and_fat_obj#1-属性">​</a></h3>
<p>这些属性用于控制 Widget 的外观和布局。</p>
<ul>
<li>
<p><strong>布局</strong>:</p>
<ul>
<li><code>margin</code>: 设置外边距。</li>
<li><code>padding</code>: 设置内边距。</li>
<li><code>x</code> / <code>y</code>: 使用 <code>PosX</code> 和 <code>PosY</code> 设置水平/垂直定位。</li>
<li><code>clamp</code>: 强制对 Widget 大小范围的约束（布局约束）。</li>
<li><code>box_fit</code>: 控制子元素如何适应容器空间（如填充、包含等）。</li>
<li><code>scrollable</code>: 控制 Widget 的滚动行为（X轴、Y轴或两者）。</li>
<li><code>layout_box</code>: 控制布局框行为。</li>
</ul>
</li>
<li>
<p><strong>视觉</strong>:</p>
<ul>
<li><code>background</code>: 设置背景（颜色或图像）。</li>
<li><code>foreground</code>: 设置前景（通常覆盖在内容之上）。</li>
<li><code>border</code>: 设置边框。</li>
<li><code>box_shadow</code>: 设置盒阴影（围绕盒子的外部阴影效果）。</li>
<li><code>radius</code>: 设置边框半径。</li>
<li><code>backdrop</code>: 设置背景效果。</li>
<li><code>opacity</code>: 设置不透明度。</li>
<li><code>visible</code>: 控制可见性。</li>
<li><code>transform</code>: 应用图形变换（平移、旋转、缩放）。</li>
<li><code>cursor</code>: 设置悬停时的光标样式。</li>
<li><code>backdrop_filter</code>: 应用背景滤镜效果（如模糊）。</li>
<li><code>filter</code>: 应用视觉滤镜效果（模糊、灰度、亮度等）。</li>
<li><code>clip_boundary</code>: 是否裁剪边界之外的内容。</li>
<li><code>painting_style</code>: 设置绘画样式（填充或描边）。</li>
</ul>
</li>
<li>
<p><strong>文本</strong>（通常由子节点继承）：</p>
<ul>
<li><code>text_style</code>: 设置字体样式。</li>
<li><code>text_align</code>: 设置文本对齐。</li>
<li><code>text_line_height</code>: 设置行高。</li>
<li><code>font_size</code>: 设置字体大小。</li>
<li><code>font_face</code>: 设置字体系列。</li>
</ul>
</li>
<li>
<p><strong>其他</strong>:</p>
<ul>
<li><code>keep_alive</code>: 保持 Widget 状态即使从视图中移除。</li>
<li><code>tooltips</code>: 设置工具提示文本。</li>
<li><code>disabled</code>: 禁用 Widget 及其子项的交互。</li>
<li><code>providers</code>: 为 Widget 设置提供者上下文。</li>
<li><code>class</code>: 应用样式类。</li>
<li><code>reuse</code>: 通过设置 reuse 属性，可以重用 Widget。如果是局部的复用，可结合 <code>LocalWidgets</code> 使用。</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-事件">2. 事件<a class="hash-link" aria-label="2. 事件的直接链接" title="2. 事件的直接链接" href="/zh/docs/next/concepts/built_in_attributes_and_fat_obj#2-事件">​</a></h3>
<p>这些属性用于处理用户交互。所有事件回调都会接收一个事件对象。</p>
<ul>
<li>
<p><strong>指针事件</strong>:</p>
<ul>
<li><code>on_pointer_down</code>: 在指针（鼠标按钮、触摸接触、笔）按下时触发。</li>
<li><code>on_pointer_move</code>: 在指针移动时触发。</li>
<li><code>on_pointer_up</code>: 在指针释放时触发。</li>
<li><code>on_pointer_cancel</code>: 在指针事件被取消时触发（例如，触摸中断）。</li>
<li><code>on_pointer_enter</code>: 在指针进入 Widget 区域时触发。</li>
<li><code>on_pointer_leave</code>: 在指针离开 Widget 区域时触发。</li>
<li><code>on_tap</code>: 在点击或轻触（按下和释放序列）时触发。</li>
<li><code>on_tap_capture</code>: <code>on_tap</code> 的捕获阶段版本。</li>
<li><code>on_double_tap</code>: 在双击时触发。</li>
<li><code>on_triple_tap</code>: 在三击时触发。</li>
<li><code>on_x_times_tap</code>: 在指定次数的点击时触发。</li>
</ul>
</li>
<li>
<p><strong>滚轮事件</strong>:</p>
<ul>
<li><code>on_wheel</code>: 在鼠标滚轮滚动时触发。</li>
<li><code>on_wheel_capture</code>: <code>on_wheel</code> 的捕获阶段版本。</li>
<li><code>on_wheel_changed</code>: 在滚轮增量变化时触发。</li>
</ul>
</li>
<li>
<p><strong>键盘事件</strong>:</p>
<ul>
<li><code>on_key_down</code>: 在按键按下时触发。</li>
<li><code>on_key_down_capture</code>: <code>on_key_down</code> 的捕获阶段版本。</li>
<li><code>on_key_up</code>: 在按键释放时触发。</li>
<li><code>on_key_up_capture</code>: <code>on_key_up</code> 的捕获阶段版本。</li>
</ul>
</li>
<li>
<p><strong>焦点事件</strong>:</p>
<ul>
<li><code>on_focus</code>: 在 Widget 获得焦点时触发。</li>
<li><code>on_blur</code>: 在 Widget 失去焦点时触发。</li>
<li><code>on_focus_in</code>: 在 Widget 或其后代之一获得焦点时触发（冒泡）。</li>
<li><code>on_focus_out</code>: 在 Widget 或其后代之一失去焦点时触发（冒泡）。</li>
</ul>
</li>
<li>
<p><strong>生命周期事件</strong>:</p>
<ul>
<li><code>on_mounted</code>: 在 Widget 挂载到 Widget 树时触发。</li>
<li><code>on_performed_layout</code>: 在 Widget 布局完成后触发。</li>
<li><code>on_disposed</code>: 在 Widget 从 Widget 树中移除时触发。</li>
</ul>
</li>
<li>
<p><strong>IME 事件</strong>:</p>
<ul>
<li><code>on_ime_pre_edit</code>: 在 IME 预编辑期间触发（例如，组成文本）。</li>
<li><code>on_chars</code>: 在接收文本字符时触发。</li>
</ul>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="使用场景">使用场景<a class="hash-link" aria-label="使用场景的直接链接" title="使用场景的直接链接" href="/zh/docs/next/concepts/built_in_attributes_and_fat_obj#使用场景">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="场景-1-声明一个新-widget">场景 1: 声明一个新 Widget<a class="hash-link" aria-label="场景 1: 声明一个新 Widget的直接链接" title="场景 1: 声明一个新 Widget的直接链接" href="/zh/docs/next/concepts/built_in_attributes_and_fat_obj#场景-1-声明一个新-widget">​</a></h3>
<p>在大多数情况下，widgets 都是用 <code>#[declare]</code> 宏定义的。这意味着您可以在使用 <code>@</code> 语法声明 Widget 时，直接使用内置属性。</p>
<p>例如，<code>Text</code> 组件本身并不包含 <code>margin</code> 或 <code>background</code> 字段，但通过 <code>#[declare]</code> 和 <code>FatObj</code> 机制，您可以在声明时直接使用它们：</p>
<div class="language-rust codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rust codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">use</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">ribir</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">::</span><span class="token namespace" style="opacity:0.7">prelude</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">::</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">fn</span><span class="token plain"> </span><span class="token function-definition function" style="color:#d73a49">simple_card_traditional</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">-&gt;</span><span class="token plain"> </span><span class="token class-name">Widget</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token lifetime-annotation symbol" style="color:#36acaa">&#x27;static</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token macro property" style="color:#36acaa">fn_widget!</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token operator" style="color:#393A34">@</span><span class="token class-name">Text</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            text</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Hello, Ribir!&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// 内置属性：布局</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            margin</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name">EdgeInsets</span><span class="token punctuation" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">all</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            padding</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name">EdgeInsets</span><span class="token punctuation" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">symmetrical</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            x</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name">AnchorX</span><span class="token punctuation" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">center</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// 内置属性：视觉</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            background</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name">Color</span><span class="token punctuation" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">from_u32</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0xFFEEAA00</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            border</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name">Border</span><span class="token punctuation" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">all</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">BorderSide</span><span class="token punctuation" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">new</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">Color</span><span class="token punctuation" style="color:#393A34">::</span><span class="token constant" style="color:#36acaa">BLACK</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">into</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            radius</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name">Radius</span><span class="token punctuation" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">all</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">4</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// 内置属性：交互</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            on_tap</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token closure-params closure-punctuation punctuation" style="color:#393A34">|</span><span class="token closure-params">_</span><span class="token closure-params punctuation" style="color:#393A34">:</span><span class="token closure-params"> </span><span class="token closure-params operator" style="color:#393A34">&amp;</span><span class="token closure-params keyword" style="color:#00009f">mut</span><span class="token closure-params"> </span><span class="token closure-params class-name">PointerEvent</span><span class="token closure-params closure-punctuation punctuation" style="color:#393A34">|</span><span class="token plain"> </span><span class="token macro property" style="color:#36acaa">println!</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Card Tapped!&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            cursor</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name">CursorIcon</span><span class="token punctuation" style="color:#393A34">::</span><span class="token class-name">Pointer</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">into_widget</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="场景-2-包装一个存在-widget">场景 2: 包装一个存在 Widget<a class="hash-link" aria-label="场景 2: 包装一个存在 Widget的直接链接" title="场景 2: 包装一个存在 Widget的直接链接" href="/zh/docs/next/concepts/built_in_attributes_and_fat_obj#场景-2-包装一个存在-widget">​</a></h3>
<p>当您需要为已经构建好的 Widget 实例（例如函数参数传入的 Widget，或变量中的 Widget）添加内置属性时，可以使用 <code>@FatObj { ... }</code> 语法。</p>
<div class="language-rust codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rust codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">use</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">ribir</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">::</span><span class="token namespace" style="opacity:0.7">prelude</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">::</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">fn</span><span class="token plain"> </span><span class="token function-definition function" style="color:#d73a49">simple_card</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">w</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name">Widget</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token lifetime-annotation symbol" style="color:#36acaa">&#x27;static</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">-&gt;</span><span class="token plain"> </span><span class="token class-name">Widget</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token lifetime-annotation symbol" style="color:#36acaa">&#x27;static</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token macro property" style="color:#36acaa">fn_widget!</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// 用 FatObj 包装 Widget 以添加内置属性</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token operator" style="color:#393A34">@</span><span class="token class-name">FatObj</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            margin</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name">EdgeInsets</span><span class="token punctuation" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">all</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            padding</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name">EdgeInsets</span><span class="token punctuation" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">symmetrical</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">10</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            x</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name">AnchorX</span><span class="token punctuation" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">center</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            background</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name">Color</span><span class="token punctuation" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">from_u32</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0xFFEEAA00</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            border</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name">Border</span><span class="token punctuation" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">all</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">BorderSide</span><span class="token punctuation" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">new</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token class-name">Color</span><span class="token punctuation" style="color:#393A34">::</span><span class="token constant" style="color:#36acaa">BLACK</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">into</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            radius</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name">Radius</span><span class="token punctuation" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">all</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">4</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            on_tap</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token closure-params closure-punctuation punctuation" style="color:#393A34">|</span><span class="token closure-params">_</span><span class="token closure-params punctuation" style="color:#393A34">:</span><span class="token closure-params"> </span><span class="token closure-params operator" style="color:#393A34">&amp;</span><span class="token closure-params keyword" style="color:#00009f">mut</span><span class="token closure-params"> </span><span class="token closure-params class-name">PointerEvent</span><span class="token closure-params closure-punctuation punctuation" style="color:#393A34">|</span><span class="token plain"> </span><span class="token macro property" style="color:#36acaa">println!</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Card Tapped!&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            cursor</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name">CursorIcon</span><span class="token punctuation" style="color:#393A34">::</span><span class="token class-name">Pointer</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// 嵌入子 Widget</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token operator" style="color:#393A34">@</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> w </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">into_widget</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>这种方式非常清晰且地道，推荐使用 <code>@FatObj { ... }</code> 而不是手动创建 <code>FatObj::new(w)</code>。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="fatobj-核心机制">FatObj 核心机制<a class="hash-link" aria-label="FatObj 核心机制的直接链接" title="FatObj 核心机制的直接链接" href="/zh/docs/next/concepts/built_in_attributes_and_fat_obj#fatobj-核心机制">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="内置属性的包装顺序">内置属性的包装顺序<a class="hash-link" aria-label="内置属性的包装顺序的直接链接" title="内置属性的包装顺序的直接链接" href="/zh/docs/next/concepts/built_in_attributes_and_fat_obj#内置属性的包装顺序">​</a></h3>
<p><code>FatObj</code> 按照固定顺序应用内置属性。这个顺序决定了最终 Widget 树的结构以及属性之间的相互作用方式。</p>
<p>从<strong>内到外</strong>的包装顺序如下（已简化为常见属性）：</p>
<ol>
<li><strong>内容</strong>（被包装的 Widget）</li>
<li><code>padding</code></li>
<li><code>foreground</code></li>
<li><code>border</code></li>
<li><code>background</code></li>
<li><code>backdrop</code></li>
<li><code>filter</code></li>
<li><code>clip_boundary</code></li>
<li><code>box_shadow</code></li>
<li><code>radius</code></li>
<li><code>scrollable</code></li>
<li><code>layout_box</code></li>
<li><code>providers</code></li>
<li><code>class</code></li>
<li><code>clamp</code> (constrained_box)</li>
<li><code>tooltips</code></li>
<li><code>margin</code></li>
<li><code>cursor</code></li>
<li><strong>事件</strong> (<code>mix_builtin</code>: <code>on_tap</code>, <code>on_pointer_move</code> 等)</li>
<li><code>transform</code></li>
<li><code>opacity</code></li>
<li><code>visibility</code></li>
<li><code>disabled</code></li>
<li><code>x</code> / <code>y</code> (position)</li>
<li><code>keep_alive</code></li>
<li><code>reuse</code></li>
</ol>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="关键要点">关键要点<a class="hash-link" aria-label="关键要点的直接链接" title="关键要点的直接链接" href="/zh/docs/next/concepts/built_in_attributes_and_fat_obj#关键要点">​</a></h4>
<p>因为包裹是有顺序的，所以外层属性的影响范围会包含内层属性。如果设置了多个内建属性后发现效果不符合预期，可以尝试调整属性的顺序。</p>
<ul>
<li><strong>事件包含margin</strong>: 由于<strong>事件</strong>包装在<strong>margin</strong>外层，默认情况下 Widget 的交互区域包括其边距。</li>
<li><strong>变换影响所有内容</strong>: <code>transform</code> 包装了大部分视觉和布局属性，因此旋转 Widget 时也会旋转其边距、背景和边框。</li>
<li><strong>可见性控制整体</strong>: <code>visibility</code> 位于接近最外层的位置，因此将其设置为隐藏会隐藏整个 Widget，包括边距。</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="如何覆盖顺序">如何覆盖顺序？<a class="hash-link" aria-label="如何覆盖顺序？的直接链接" title="如何覆盖顺序？的直接链接" href="/zh/docs/next/concepts/built_in_attributes_and_fat_obj#如何覆盖顺序">​</a></h3>
<p>有时默认的包装顺序可能不符合您的需求。例如，您可能希望点击区域（<code>on_tap</code>）<strong>排除</strong>边距。</p>
<p>由于 <code>FatObj</code> 按固定顺序应用属性，您可以通过手动嵌套 <code>FatObj</code> 来改变顺序。先应用内层属性，然后用另一个 <code>FatObj</code> 包装外层属性。</p>
<p><strong>示例：让点击区域排除边距</strong></p>
<p>如果您直接这样写:</p>
<div class="language-rust codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rust codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">@</span><span class="token class-name">FatObj</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    margin</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name">EdgeInsets</span><span class="token punctuation" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">all</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">20</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    on_tap</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token closure-params closure-punctuation punctuation" style="color:#393A34">|</span><span class="token closure-params">_</span><span class="token closure-params closure-punctuation punctuation" style="color:#393A34">|</span><span class="token plain"> </span><span class="token macro property" style="color:#36acaa">println!</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Clicked!&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">@</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> w </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>结构是 <code>MixBuiltin(Margin(w))</code>，因此点击边距也会触发事件。</p>
<p>要让点击区域排除边距，您需要的结构是 <code>Margin(MixBuiltin(w))</code>。可以这样实现：</p>
<div class="language-rust codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rust codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token macro property" style="color:#36acaa">fn_widget!</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// 外部 FatObj 处理边距</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">@</span><span class="token class-name">FatObj</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        margin</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name">EdgeInsets</span><span class="token punctuation" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">all</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">20</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// 内部 FatObj 处理点击事件</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token operator" style="color:#393A34">@</span><span class="token class-name">FatObj</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            on_tap</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token closure-params closure-punctuation punctuation" style="color:#393A34">|</span><span class="token closure-params">_</span><span class="token closure-params closure-punctuation punctuation" style="color:#393A34">|</span><span class="token plain"> </span><span class="token macro property" style="color:#36acaa">println!</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Clicked inside content (excluding margin)!&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token operator" style="color:#393A34">@</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> w </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>通过嵌套 <code>FatObj</code>，您可以完全控制属性的组合顺序。</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="进阶动态访问与修改">进阶：动态访问与修改<a class="hash-link" aria-label="进阶：动态访问与修改的直接链接" title="进阶：动态访问与修改的直接链接" href="/zh/docs/next/concepts/built_in_attributes_and_fat_obj#进阶动态访问与修改">​</a></h2>
<p>内置属性（如 <code>opacity</code>、<code>background</code>、<code>margin</code>）是 <code>FatObj</code> 的属性。在声明式 UI 中，您通常在创建时将这些属性绑定到状态。然而，<strong>如果您需要在代码中动态修改它们（例如在事件处理程序内部）或者在 <code>pipe!</code> 中使用该字段，您必须访问该字段的 Writer。</strong></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="简单跟随示例一个组件跟随另一个">简单跟随示例（一个组件跟随另一个）<a class="hash-link" aria-label="简单跟随示例（一个组件跟随另一个）的直接链接" title="简单跟随示例（一个组件跟随另一个）的直接链接" href="/zh/docs/next/concepts/built_in_attributes_and_fat_obj#简单跟随示例一个组件跟随另一个">​</a></h3>
<div class="language-rust codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-rust codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">use</span><span class="token plain"> </span><span class="token namespace" style="opacity:0.7">ribir</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">::</span><span class="token namespace" style="opacity:0.7">prelude</span><span class="token namespace punctuation" style="opacity:0.7;color:#393A34">::</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">/// 一个小示例，其中 `follower` 的 `background` 跟随 `leader` 的</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">/// `background`。点击 `leader` 会切换其背景颜色；`follower` 自动更新</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">/// 因为它通过 `pipe!($read(...))` 绑定到 `leader` 的 writer。</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">fn</span><span class="token plain"> </span><span class="token function-definition function" style="color:#d73a49">follower_example</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">-&gt;</span><span class="token plain"> </span><span class="token class-name">Widget</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token lifetime-annotation symbol" style="color:#36acaa">&#x27;static</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token macro property" style="color:#36acaa">fn_widget!</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// 创建有状态的句柄，以便我们可以访问内置属性。</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">mut</span><span class="token plain"> leader </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">@</span><span class="token class-name">Text</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> text</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Leader (click me)&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// Follower: 将背景绑定到 leader 的背景，使其跟随。</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> follower </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">@</span><span class="token class-name">Text</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          text</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Follower (follows leader)&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          background</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token macro property" style="color:#36acaa">pipe!</span><span class="token punctuation" style="color:#393A34">(</span><span class="token variable" style="color:#36acaa">$read</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">leader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">background</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">clone</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> seed </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">Instant</span><span class="token punctuation" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">now</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token operator" style="color:#393A34">@</span><span class="token class-name">Column</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// Leader: 点击切换其背景色</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           </span><span class="token operator" style="color:#393A34">@</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">leader</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                cursor</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token class-name">CursorIcon</span><span class="token punctuation" style="color:#393A34">::</span><span class="token class-name">Pointer</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                on_tap</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">move</span><span class="token plain"> </span><span class="token closure-params closure-punctuation punctuation" style="color:#393A34">|</span><span class="token closure-params">_</span><span class="token closure-params closure-punctuation punctuation" style="color:#393A34">|</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token operator" style="color:#393A34">*</span><span class="token variable" style="color:#36acaa">$write</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">leader</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">background</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token class-name">Color</span><span class="token punctuation" style="color:#393A34">::</span><span class="token function" style="color:#d73a49">from_u32</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">seed</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">elapsed</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">as_millis</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">u32</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">into</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token operator" style="color:#393A34">@</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> follower </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">into_widget</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>说明：</p>
<ul>
<li><code>leader</code> 是通过 <code>@</code> 创建的状态句柄。它的 <code>on_tap</code> 事件使用 <code>$write</code> 切换其 <code>background</code>。</li>
<li><code>follower</code> 通过 <code>pipe!($read(...)).map(...)</code> 将其 <code>background</code> 绑定到 <code>leader</code> 的 <code>background</code>，因此每当 leader 的背景发生变化时，它会自动更新。</li>
<li>当多个 Widget 应该在视觉上反映单一事实来源（主题、选择、焦点等）而不手动传播事件时，这种模式很有用。</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="总结">总结<a class="hash-link" aria-label="总结的直接链接" title="总结的直接链接" href="/zh/docs/next/concepts/built_in_attributes_and_fat_obj#总结">​</a></h2>
<p><code>FatObj</code> 是 Ribir 灵活性的关键。它让任何 Widget 都能拥有丰富的通用功能，同时保持核心 Widget 定义的简洁。通过内置属性，您可以快速构建美观且具有交互性的 UI，而无需为每个 Widget 重复实现这些基础功能。</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"></div><div class="col lastUpdated_JAkA"><span class="theme-last-updated">最后<!-- -->由 <b>RChangelog[bot]</b> <!-- -->于 <b><time datetime="2026-02-25T04:36:21.000Z" itemprop="dateModified">2026年2月25日</time></b> <!-- -->更新</span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文件选项卡"><a class="pagination-nav__link pagination-nav__link--prev" href="/zh/docs/next/concepts/widgets_composition"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">Widget 系统</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/zh/docs/next/concepts/state_management"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">状态管理</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a class="table-of-contents__link toc-highlight" href="/zh/docs/next/concepts/built_in_attributes_and_fat_obj#-实例化过程"><code>@</code> 实例化过程</a><ul><li><a class="table-of-contents__link toc-highlight" href="/zh/docs/next/concepts/built_in_attributes_and_fat_obj#declare-选项"><code>#[declare]</code> 选项</a></li><li><a class="table-of-contents__link toc-highlight" href="/zh/docs/next/concepts/built_in_attributes_and_fat_obj#eager-模式复杂字段的部分初始化">Eager 模式：复杂字段的部分初始化</a></li></ul></li><li><a class="table-of-contents__link toc-highlight" href="/zh/docs/next/concepts/built_in_attributes_and_fat_obj#什么是-fatobj">什么是 FatObj？</a><ul><li><a class="table-of-contents__link toc-highlight" href="/zh/docs/next/concepts/built_in_attributes_and_fat_obj#工作原理">工作原理</a></li></ul></li><li><a class="table-of-contents__link toc-highlight" href="/zh/docs/next/concepts/built_in_attributes_and_fat_obj#常见内置属性">常见内置属性</a><ul><li><a class="table-of-contents__link toc-highlight" href="/zh/docs/next/concepts/built_in_attributes_and_fat_obj#1-属性">1. 属性</a></li><li><a class="table-of-contents__link toc-highlight" href="/zh/docs/next/concepts/built_in_attributes_and_fat_obj#2-事件">2. 事件</a></li></ul></li><li><a class="table-of-contents__link toc-highlight" href="/zh/docs/next/concepts/built_in_attributes_and_fat_obj#使用场景">使用场景</a><ul><li><a class="table-of-contents__link toc-highlight" href="/zh/docs/next/concepts/built_in_attributes_and_fat_obj#场景-1-声明一个新-widget">场景 1: 声明一个新 Widget</a></li><li><a class="table-of-contents__link toc-highlight" href="/zh/docs/next/concepts/built_in_attributes_and_fat_obj#场景-2-包装一个存在-widget">场景 2: 包装一个存在 Widget</a></li></ul></li><li><a class="table-of-contents__link toc-highlight" href="/zh/docs/next/concepts/built_in_attributes_and_fat_obj#fatobj-核心机制">FatObj 核心机制</a><ul><li><a class="table-of-contents__link toc-highlight" href="/zh/docs/next/concepts/built_in_attributes_and_fat_obj#内置属性的包装顺序">内置属性的包装顺序</a></li><li><a class="table-of-contents__link toc-highlight" href="/zh/docs/next/concepts/built_in_attributes_and_fat_obj#如何覆盖顺序">如何覆盖顺序？</a></li></ul></li><li><a class="table-of-contents__link toc-highlight" href="/zh/docs/next/concepts/built_in_attributes_and_fat_obj#进阶动态访问与修改">进阶：动态访问与修改</a><ul><li><a class="table-of-contents__link toc-highlight" href="/zh/docs/next/concepts/built_in_attributes_and_fat_obj#简单跟随示例一个组件跟随另一个">简单跟随示例（一个组件跟随另一个）</a></li></ul></li><li><a class="table-of-contents__link toc-highlight" href="/zh/docs/next/concepts/built_in_attributes_and_fat_obj#总结">总结</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title"></div><ul class="footer__items clean-list"><li class="footer__item">
                  <a href="https://www.ribir.org" target="_blank" rel="noreferrer noopener" style="display: flex; align-items: center;">
                    <img src="/img/logo.svg" width="48" height="48" style="margin-right: 10px;">
                    <h2 class="bg-clip-text text-transparent bg-gradient-to-r from-blue-700 to-green-300" style="font-size: 30px; margin: 0;">Ribir</h2>
                  </a>                
                </li></ul></div><div class="col footer__col"><div class="footer__title">Learn</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/zh/docs/introduction">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/zh/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/RibirX/Ribir" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 Ribir org. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>